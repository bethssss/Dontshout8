# 作业不吼 - 技术架构设计

## 一、整体技术架构流程图

```
+------------------+     +------------------+     +------------------+
|                  |     |                  |     |                  |
|  前端（用户App）  | --> |  后端服务器      | --> |  第三方AI服务    |
|                  |     |                  |     |                  |
+------------------+     +------------------+     +------------------+
        |                        |                        |
        v                        v                        v
+------------------+     +------------------+     +------------------+
| 1. 拍照/选择图片  |     | 3. 接收图片      |     | 5. OCR文字识别  |
| 2. 上传图片      |     | 4. 图片预处理    |     | 6. LLM内容生成  |
+------------------+     +------------------+     +------------------+
        |                        |                        |
        |                        v                        |
        |                +------------------+            |
        |                | 7. 数据存储      |            |
        |                | 8. 结果缓存      |            |
        |                +------------------+            |
        |                        |                       |
        v                        v                       v
+----------------------------------------------------------+
|                                                          |
|  9. 前端展示多种讲解方式（标准讲解、生活类比、游戏互动）  |
|                                                          |
+----------------------------------------------------------+
```

## 二、数据流转详细说明

1. **前端 -> 后端**：
   - 用户通过App拍照或从相册选择题目图片
   - 前端将图片转换为Base64或FormData格式
   - 通过HTTPS请求将图片发送到后端API接口
   - 前端显示加载动画，等待后端处理

2. **后端 -> 第三方AI服务**：
   - 后端接收图片并进行预处理（裁剪、压缩、增强等）
   - 调用OCR服务（如百度AI）识别图片中的文字
   - 将识别出的文字发送给大语言模型（如GPT-4或文心一言）
   - 使用精心设计的Prompt引导LLM生成多种讲解方式

3. **第三方AI服务 -> 后端**：
   - OCR服务返回识别出的文字内容
   - LLM返回结构化的JSON数据，包含多种讲解方式
   - 后端接收并处理AI返回的数据

4. **后端 -> 前端**：
   - 后端将处理后的数据返回给前端
   - 前端接收数据并解析JSON
   - 前端根据数据动态渲染讲解库页面
   - 用户可以切换不同的讲解方式查看

## 三、技术选型建议

### 前端技术栈
- **框架**：Vue.js 或 React Native（用于开发跨平台App）
- **UI组件库**：Tailwind CSS（已在现有代码中使用）
- **HTTP客户端**：Axios（处理API请求）
- **状态管理**：Vuex/Pinia（Vue）或 Redux（React）

### 后端技术栈
- **语言/框架**：Python + Flask（轻量级、易于上手）
- **服务器**：Gunicorn + Nginx
- **数据库**：MongoDB（存储题目和讲解内容）
- **缓存**：Redis（缓存常见题目的讲解结果）
- **部署**：Docker + Kubernetes（容器化部署）

### 第三方AI服务
- **OCR服务**：百度AI OCR（中文识别效果好）
- **大语言模型**：OpenAI GPT-4 或 百度文心一言4.0
- **图像处理**：OpenCV（开源计算机视觉库）

## 四、安全与性能考虑

### 安全措施
- HTTPS加密传输
- API密钥管理与轮换
- 用户认证与授权
- 输入验证与过滤
- 敏感信息加密存储

### 性能优化
- 图片压缩与预处理
- 结果缓存机制
- CDN加速静态资源
- 服务器负载均衡
- 数据库索引优化